<%= render partial: 'layouts/profile_nav', object: @user %>
<div class="container">
	<div class="panel panel-default">
		<div class="panel-body">
	<h2>
		<strong>Allergies</strong> - <%= link_to @user.full_name, @user %>
		<button class="btn btn-default pull-right" data-toggle="modal" data-target="#myModal">
			New Allergy
		</button>
	</h2>
	<hr>

	<!-- Modal -->
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h3 class="modal-title" id="myModalLabel">New Allergy</h3>
				</div>
				<%= form_for Allergy.new do |f| %>
				<div class="modal-body">
					<div>
						<%= f.select(:name, @user.allergies.all.collect {|a| [a.name, a.id]}) -%>
						<%= f.label :name %><br />
						<%= f.text_field :name, autofocus: true, class:"form-control" %>
					</div>
					<div>
						<%= f.label :description %><br />
						<%= f.text_area :description, class:"form-control" %>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					<%= f.submit "Save Allergy", class: "btn btn-primary" %>
				</div>
				<% end %>
			</div>
		</div>
	</div>


	<table class="table table-striped table-hover">
		<tr>
			<th>Name</th>
			<th>Description</th>
		</tr>
		<% for allergy in @allergies %>
		<tr>
			<td><%= link_to allergy.name, allergy %></td>
			<td><%= allergy.description %></td>
		</tr>
		<% end %>
	</table>
</div>
</div>